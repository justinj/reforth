\ Each new term in the Fibonacci sequence is generated by adding the previous two terms. 
\ By starting with 1 and 2, the first 10 terms will be:
\ 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ...
\ By considering the terms in the Fibonacci sequence whose values do not exceed four 
\ million, find the sum of the even-valued terms.


: FIB_ITERATE 
  >R \ Shove the running sum onto the rstack
  over + swap \ Calculate the next fibonacci number
  R> \ Put it back
;

: CHECK_EXIT
  OVER 4000000 > IF . bye THEN
;

: ADD_IF_EVEN
  OVER 2 MOD 0=
  IF
    OVER + 
  THEN
;

: SOLVE
  1 0 0 \ Two successive fibonacci numbers, and the running sum
  BEGIN
    FIB_ITERATE
    ADD_IF_EVEN
    CHECK_EXIT
  0 UNTIL
;

SOLVE
